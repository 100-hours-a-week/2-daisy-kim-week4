![header](https://capsule-render.vercel.app/api?type=venom&color=0:aca0eb,100:7f6aee&height=300&section=header&text=커뮤니티&fontSize=80&desc=카테부%204주차%20과제&descAlignY=75&fontColor=d9d9d9)

# 📚 프로젝트 주제
### 3주차 과제 디벨롭 - vanilla.js로 커뮤니티 event, fetch 처리하기

<br>

## 📹 결과 영상
![4주차 과제 영상](https://github.com/user-attachments/assets/3252db50-e2f6-45d3-86f9-8d9ec7f685cc)


<Br>

## 👀 구현 내용/회고
1. event 처리 / ux 향상
   설계상 몇몇 뒤로가기가 없는 설계 페이지가 있어서 로그인과 회원가입을 제외한 페이지에서 헤더의 "아무말 대잔치"를 클릭하면 게시글 목록 페이지로 렌더링되도록 구현하였다.<br>
   사실 3주차 과제에서 이벤트 처리할 게 댓글 부분만 남았었다.<br>
   그래서 기존에 모든 댓글에 대해 수정, 삭제 버튼을 표시했는데 내 댓글일 경우에만 뜨도록 구현하였다. <br>
   또한 api 설계할 때 isMyComment를 반환하도록 작성하였기 때문에 저번주 board.j(json 파일)에서 isMyComment를 추가하였다.<br>
   3주차에서 미리 json용 js파일을 작성했었는데 api를 작성하고 나니 추가해야 하는 속성들이 보였다.<br>
   api를 작성하면서도 이 속성들이 필요하겠구나가 1차로 보이고 이후 구현하면서 또 필요한 응답 코드와 속성이 더 보였다.<br>
   그리고 해당 속성을 추가함으로써 자신의 댓글일 경우에만 수정, 삭제 버튼을 클릭하게 구현할 수 있었다.<br>
   이후 수정 버튼을 누르면 댓글 입력창에 기존 댓글이 로드되도록 이벤트 처리를 하였다.<br>
   fetch 오류 나는 거에 비하면 시간이 얼마 걸리지 않았으나 이 부분에서 querySelectorAll, event.target을 처음 사용해 보았다.<br>
   getElementById, querySelector는 익숙했는데 querySelectorAll을 쓰면서 id 속성으로는 안 되길래 id 속성이 유일성을 가진다는 걸 처음 알게 되었다.<br>
   그리고 리액트 하면 innerHTML 쓸 일이 없다보니 그냥 html 하위에서 자바스크립트를 편하게 쓰면서 index를 가져다 쓸 수 있었는데<br>
   그러지 못해서 시간이 좀 걸렸다.<br>
   그리고 전에 왜 태그 속성으로 class를 쓰라고 하는지 잘 몰랐었는데 이번에 id와 class 속성을 구분하면서 좀 이해할 것 같기도 하다.
   
3. fetch 처리 - [개인정보 수정, 비밀번호 수정]
   user.js, board.js를 json 파일로 수정하였다.<br>
   작년에 플젝하면서 js에 json 정의하고 fetch 없이 export 처리한 경험이 있어서 3주차 과제에서도 그렇게 했었는데 json? 그냥 못 불러오나? 그래서 fetch 쓰는 건가?해서 전부 바꿨다.<br>
   프론트엔드로 플젝을 몇 번 했지만 api 구현은 거의 항상 gpt에게 맡겼던 터라... 엄청난 약점이라는 걸 알고 있었다.<br>
   그래서 처음에 api 어떻게 불러오는 건지 처음에 감이 오지 않았다.<br>
   baseUrl이 없는데 어떻게 하라는 거지..? 이러고..<br>
   근데 1월에 나간 해커톤에서 api 연결 세팅 담당한 언니가 baseUrl을 만들기보다 파일별로 전체 url을 fetch했었다.<br>
   그래서 파일 상대주소로 fetch가 되나.. 이러고 있다가 되는 걸 알고 미니퀘스트 때 작성한 코드 생각하면서 구현하기 시작했다.<br>
   미니퀘스트가 fetch 이번에 커뮤니티 구현하는 데 많은 도움이 되었다.<br>
   이론과 응용의 괴리를 항상 느끼는 편인데 미니퀘스트가 async의 이해를 많이 도왔다.<br>
   아 정확히 말하면 사실 이때까지만 해도 fetch 구현 감이 잡히길래 이해한 줄 알았다. ㅎㅎ
   
4. fetch - [댓글, 게시글 상세, 게시글 목록]
   사실 개인 정보 수정하면서 뭐가 자꾸 안 되는 이벤트들이 있는데 심각해 보이지 않아서 fetch 세팅부터 하였다.<br>
   근데 이때부터 댓글, 게시글 상세는 파일 분리를 시작했는데 똑같이 가져가서 복붙만 했는데도 갑자기 화면에 댓글, 게시글 상세 내용이 보이지 않았다.<br>
   급 심각성을 느끼고 막 수정하다가 async 키워드와 한 파일에 여러 개의 DOMLoaded 이벤트 리스너, 여러 개의 script 태그가 문제가 된다는 사실을 알았다.<br>
   개발자 모드 안 켜고 구현하고 있다가 이벤트 리스너가 자꾸 null이라고 하길래 이게 무슨 말인가.. 이러고 있었다.
   그제서야 알게 된 사실이 이론으로 배운 js에서의 코드 실행 순서가 이론으로는 이해가 됐는데 막상 코드에는 전혀 적용하지 않고 있었다는 것이다.<br>
   이러면서 저번주에 잘 되던 댓글 등록 버튼 이벤트 자체가 실행이 안 되길래 아.. 디테일 처리 어렵네.. 이러고 있었다..~<br>
   암튼 파일 분리하면서도 동작하지 않는 게 DOM로드 되는 시점이 한 화면이지만 async와 async가 아닌 함수로 나뉘어 구현돼있었다.<br>
   3주차 때는 그냥 구현하는 순서대로 냅다 귀찮다 하고 <script>로 만들어서 구현했다가<br>
   async로 감싼 함수는 로드되지 않았는데 async로 감싸지 않은 함수는 먼저 로드되어 null문제가 생겼다.<br>
   이 사실을 게시글 목록 파일 분리하면서 거의 깨달았다.<br>

5. fetch - [로그인, 회원가입]
   이거를 사실 거의 마지막에 파일 분리랑 ux향상하면서 동작 안 되는 거 있는지 확인하면서 구현하게 되었다.<br>
   로그인, 회원가입에는 우선 fetch할 거 없다고 생각하고 있었다가 로그인할 때 사용자 정보랑 일치 확인할 때 필요하다는 걸 나중에 확인했다.<br>
   3주차에서 이걸 가장 먼저 구현한 터라 건들 것 없이 괜찮다고 생각했기 때문...<br>
   근데 게시글 목록까지 하면서 어떤 문제가 원인이었는지 확실하게 알았기도 하고 getUser 비동기 함수도 이미 있었기 때문에 금방 해결되었다.<br>
   근데 해커톤 때 프론트엔드 나 혼자인 팀 들어가면 쉽지 않을 것 같다...
   
6. 파일 분리
   fetch가 필요한 부분은 구현하면서 파일을 분리했고 필요하지 않은 부분은 함수 위주로 나중에 몰아서 분리하였다. <br>
   게시글 상세 화면에서의 상단 정보들, 댓글 부분에 ${데이터} 처리하려고 innerHTML로 구현했었는데 이걸 다른 컴포넌트라고 여기고 파일을 분리했다.<br>
   리액트에서는 innerHTML안 쓰고 걍 html 하위에서 가능한데 innerHTML 쓰는 것 자체가 가독성이 떨어져서 분리해야겠다고 생각했기 떄문이다.
   암튼 저번주에도 innerHTML 쓰면서 리액트 쓰고 싶다고 느꼈지만 이번주도 마찬가지로 컴포넌트로 분리해도 개인적으로 가독성이 떨어진다고 느껴 다시 한 번 리액트를 찾았다..
   아 근데 리액트 하면서도 js 부분은 거의 파일 분리 안 하고 css, html 컴포넌트만 분리했었다.<br>
   마지막 플젝 때 겨우 Context api 알고 분리할 수 있구나~ 정도로 가볍게 넘어갔는데 객체지향이라고는 생각도 못하고 있었다.<br>
   그때 프론트엔드의 객체지향은 없다 생각하기도 했고 이 정도면 또래 중에는 프론트 고수지;; 이러면서 자만하던 시절...ㅎ
   근데 이번에 js를 이해하면서 파일을 분리하니까 아 내가 3주차를 진짜 너무 더럽게 구현했구나, 의존성, 코드 중복 장난 아니구나 깨닫게 되었다.<br> 
   그래서 리팩토링을 제대로 하고 싶었는데 기존 코드들 의존성이 좀 있어서 몇 부분만 파일 분리하는 데 그치게 되었다. (좀 아숩...)<br>
   그리고 마지막에는 컴포넌트, 이벤트 처리하는 파일 구조를 좀 수정하고 싶은데 거의 다 구현한 상황에서 디렉토리 구조까지 수정하면 진짜 걷잡을 수 없을 것 같아서 아쉽게 놔두게 되었다.<br>

7. ux 향상
   피그마에는 없었는데 수정, 삭제 버튼 누르거나 hover할 때 scale을 적용하였다.<br>
   뭔가 버튼 누르는 건데 마우스 호버, 클릭 효과 없으면 ux가 떨어진다고 생각해서...<br>
   그리고 화면 상 가운데 정렬이 아니거나 상단, 하단, 우측, 좌측 안 맞으면 스트레스 받는 스타일이라<br>
   너무 사소하지만 수정, 삭제 버튼을 padding보다 line-height로 규격을 세팅했다.<br>
   그리고 또 피그마에는 없었는데 닉네임 수정할 때 다시 수정하려 해도 "수정완료" 표시가 그대로 있으면 안 될 것 같아서 input 태그에 이벤트 리스닝을 적용해서 없앴다.
   뭔가 나중에 구현하면서 직원들이나 클라이언트랑 사소한 거 하나하나 상의하는 거 재밌을 것 같다.<br>
   또 마이페이지 토글 선택하는 게 버튼 부분이 아니라 안쪽 글자 누를 때만 되길래 수정헀다.<br>
   이런 실수를 종종 하는데 div로 다 둘러싸고 다른 태그를 넣는 습관 때문에 그런 것 같다...<br>

! pr마다 한 번에 커밋한 양이 좀 많아서 정확한 순서가 기억나지 않아 부분별로 구현하면서 느낀점을 작성하게 되었습니다.
